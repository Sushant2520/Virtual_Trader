const User = require('../models/User'); const Asset = require('../models/Asset'); const bcrypt = require('bcryptjs');
module.exports = async function seed(){ const adminEmail='admin@demo.com'; let admin = await User.findOne({email:adminEmail}); if(!admin){ const h = await bcrypt.hash('password',10); admin = await User.create({name:'Admin',email:adminEmail,passwordHash:h,balance:100000,role:'admin'}); console.log('seeded admin'); } const symbols=['AAPL','MSFT','BTCUSDT','ETHUSDT','EURUSD']; for(const s of symbols){ const ex = await Asset.findOne({symbol:s}); if(!ex) await Asset.create({symbol:s,type:s.endsWith('USDT')?'crypto':(s.includes('USD')?'forex':'stock'),name:s}); } };
