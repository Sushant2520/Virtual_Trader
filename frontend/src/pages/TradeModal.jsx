import React,{useState} from 'react'; import API from '../api/api'; export default function TradeModal({symbol,onClose}){ const [side,setSide]=useState('buy'); const [qty,setQty]=useState(1); async function submit(e){ e.preventDefault(); try{ const r=await API.post('/trades/execute',{symbol,side,quantity:qty}); alert('Executed. New balance: '+(r.data.balance||0)); const u=JSON.parse(localStorage.getItem('user')||'{}'); if(r.data.balance){ u.balance=r.data.balance; localStorage.setItem('user',JSON.stringify(u)); } onClose(); }catch(e){ alert('Trade failed'); } } return (<div className='modal'><div className='modal-inner'><h3>Trade {symbol}</h3><form onSubmit={submit}><select value={side} onChange={e=>setSide(e.target.value)}><option value='buy'>Buy</option><option value='sell'>Sell</option></select><input type='number' value={qty} onChange={e=>setQty(e.target.value)} /><div><button type='submit'>Execute</button><button type='button' onClick={onClose}>Cancel</button></div></form></div></div>); }
