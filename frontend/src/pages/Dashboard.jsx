import React,{useEffect,useState} from 'react'; import API from '../api/api'; import TradeModal from './TradeModal';
export default function Dashboard(){ const user=JSON.parse(localStorage.getItem('user')||'null'); const [balance,setBalance]=useState(user?.balance||0); const [show,setShow]=useState(false); const [symbol,setSymbol]=useState('AAPL'); const [quote,setQuote]=useState(null);
useEffect(()=>{ API.get('/market/quote',{params:{symbol}}).then(r=>setQuote(r.data.price)).catch(()=>{}); },[symbol]);
const open=(s)=>{ setSymbol(s); setShow(true); };
return (<div className='container'><header><h1>Virtual Trading Platform</h1></header><div className='grid'><div className='card summary'><h3>Account Summary</h3><div>Balance: <strong>${balance.toFixed(2)}</strong></div></div><div className='card chart'><h3>Market Chart</h3><div className='placeholder'>600x300</div></div><div className='card trade'><h3>Trade</h3><label>Asset</label><input value={symbol} onChange={e=>setSymbol(e.target.value)} /><label>Quantity</label><input defaultValue={1} type='number' /><div className='actions'><button onClick={()=>open(symbol)}>BUY</button><button onClick={()=>open(symbol)}>SELL</button></div></div><div className='card watch'><h3>Market Watch</h3><table><tbody>{['EURUSD','GBPUSD','USDJPY','XAUUSD','BTCUSD'].map(s=>(<tr key={s}><td>{s}</td><td>$ {Math.round((Math.random()*1000)+1)}</td></tr>))}</tbody></table></div><div className='card historywide'><h3>Trade History</h3><table><thead><tr><th>Time</th><th>Asset</th><th>Type</th><th>Price</th><th>Qty</th></tr></thead><tbody><tr><td>12:15:29</td><td>EURUSD</td><td>SELL</td><td>$1.08</td><td>300</td></tr><tr><td>12:15:25</td><td>EURUSD</td><td>BUY</td><td>$1.09</td><td>250</td></tr></tbody></table></div></div>{show && <TradeModal symbol={symbol} onClose={()=>setShow(false)} />}</div>); }
